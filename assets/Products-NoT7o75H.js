import{d as q,u as T,c as y,i as u,e as d,f as e,t as g,h as L,s as U,F as M,j as V,b as _,_ as D,m as f,o as E,w as S,r as H,g as $,x as j,k as K,q as w,v as F,y as O,T as R}from"./index-CSEyxdT9.js";import{_ as z}from"./AppLayout-B6hHIpEb.js";import{L as W}from"./Loader-l99-MrMN.js";import{_ as Z}from"./ErrorMessage-gaV-nPEj.js";import"./Footer-CwoNZgPF.js";const Q=(o,l=100)=>o?o.length<=l?o:o.substring(0,l)+"...":"",G={class:"px-4 sm:px-6 py-5"},J=["src","alt"],X={class:"px-4 sm:px-6 py-5 font-semibold text-gray-900 dark:text-white text-sm sm:text-base"},Y={class:"hidden lg:table-cell px-4 sm:px-6 py-5 text-gray-600 dark:text-gray-400 text-sm"},tt={class:"px-4 sm:px-6 py-5"},et={class:"px-3 py-1.5 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-200 rounded-lg text-xs sm:text-sm font-medium"},rt={class:"px-4 sm:px-6 py-5 font-bold text-primary text-sm sm:text-base"},st={__name:"ProductRow",props:{product:{type:Object,required:!0}},setup(o){const l=o,p=q(),c=T(),x=y(()=>l.product.stock>50?"text-green-600":l.product.stock>0?"text-orange-600":"text-red-600"),m=y(()=>i=>{if(!i)return"KES 0.00";const h=(i*c.currentRate).toFixed(2),[C,v]=h.split(".");return"KES "+C.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+v}),n=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",b=()=>{p.push(`/products/${l.product.id}`)};return(i,h)=>(d(),u("tr",{onClick:b,class:"hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition border-b hover:shadow-sm"},[e("td",G,[e("img",{src:o.product.thumbnail,alt:o.product.title,class:"w-11 h-11 sm:w-13 sm:h-13 rounded-lg object-cover shadow-sm"},null,8,J)]),e("td",X,g(o.product.title),1),e("td",Y,g(L(Q)(o.product.description,80)),1),e("td",tt,[e("span",et,g(n(o.product.category)),1)]),e("td",rt,g(m.value(o.product.price)),1),e("td",{class:U(["hidden sm:table-cell px-4 sm:px-6 py-5 text-sm font-semibold",x.value])},g(o.product.stock)+" "+g(o.product.unit||"units"),3)]))}},at={class:"bg-white dark:bg-gray-900 rounded-xl shadow-md overflow-x-auto border border-gray-100 dark:border-gray-700"},ot={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},lt={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},dt={__name:"ProductTable",props:{products:{type:Array,required:!0}},setup(o){return(l,p)=>(d(),u("div",at,[e("table",ot,[p[0]||(p[0]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 sm:px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-widest"}," Image "),e("th",{class:"px-4 sm:px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-widest"}," Title "),e("th",{class:"hidden lg:table-cell px-4 sm:px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-widest"}," Description "),e("th",{class:"px-4 sm:px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-widest"}," Category "),e("th",{class:"px-4 sm:px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-widest"}," Price "),e("th",{class:"hidden sm:table-cell px-4 sm:px-6 py-4 text-left text-xs font-bold text-gray-700 dark:text-gray-300 uppercase tracking-widest"}," Stock ")])],-1)),e("tbody",lt,[(d(!0),u(M,null,V(o.products,c=>(d(),_(st,{key:c.id,product:c},null,8,["product"]))),128))])])]))}},nt={class:"space-y-4 sm:space-y-6"},it={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ct={class:"bg-white dark:bg-gray-900 p-3 sm:p-4 rounded-lg shadow space-y-3 sm:space-y-4"},ut={class:"flex flex-col sm:flex-row gap-3 sm:gap-4"},pt={class:"flex-1 relative"},gt=["value"],xt={key:2,class:"text-center py-8 sm:py-12 bg-white dark:bg-gray-900 rounded-lg shadow"},yt={key:3,class:"flex items-center justify-center gap-2 sm:gap-3 py-6"},mt=["disabled"],bt={class:"flex gap-1 sm:gap-2"},ht=["onClick"],vt=["disabled"],P=10,kt={__name:"Products",setup(o){const l=T(),p=f(""),c=f(""),x=f(""),m=f("name_asc"),n=f(1),b=y(()=>{let a=[...l.products];if(p.value){const t=p.value.toLowerCase();a=a.filter(r=>{var N,A;const s=(N=r.title)==null?void 0:N.toLowerCase().includes(t),k=(A=r.category)==null?void 0:A.toLowerCase().includes(t);return s||k})}switch(c.value&&(c.value==="Other"?x.value?a=a.filter(t=>{var k;const r=((k=t.category)==null?void 0:k.toLowerCase())||"";return!l.categories.includes(r)&&r!==""&&r.includes(x.value.toLowerCase())}):a=a.filter(t=>{var s;const r=((s=t.category)==null?void 0:s.toLowerCase())||"";return!l.categories.includes(r)&&r!==""}):a=a.filter(t=>{var r;return((r=t.category)==null?void 0:r.toLowerCase())===c.value.toLowerCase()})),m.value){case"price_low":a.sort((t,r)=>(t.price||0)-(r.price||0));break;case"price_high":a.sort((t,r)=>(r.price||0)-(t.price||0));break;case"name_asc":a.sort((t,r)=>(t.title||"").localeCompare(r.title||""));break;case"name_desc":a.sort((t,r)=>(r.title||"").localeCompare(t.title||""));break;case"stock_high":a.sort((t,r)=>(r.stock||0)-(t.stock||0));break}return a}),i=y(()=>Math.ceil(b.value.length/P)),h=y(()=>{const a=(n.value-1)*P,t=a+P;return b.value.slice(a,t)}),C=()=>{n.value=1},v=()=>{n.value=1},B=a=>a?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():"",I=y(()=>l.categories);return E(async()=>{l.products.length===0&&await l.fetchProducts()}),(a,t)=>{const r=H("router-link");return d(),_(z,null,{default:S(()=>[e("div",nt,[e("div",it,[t[7]||(t[7]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"Products",-1)),$(r,{to:"/home",class:"inline-flex items-center gap-2 px-4 sm:px-5 py-2 sm:py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-all font-medium text-sm sm:text-base shadow-sm hover:shadow-md w-fit"},{default:S(()=>[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-3m0 0l7-4 7 4M5 9v10a1 1 0 001 1h12a1 1 0 001-1V9m-9 4v4m0 0v4m0-4h4m-4 0h-4"})],-1),K(" Back to Dashboard ",-1)])]),_:1})]),e("div",ct,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),onInput:C,type:"text",placeholder:"Search by title or category...",class:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-sm sm:text-base bg-white dark:bg-gray-800 text-gray-900 dark:text-white"},null,544),[[F,p.value]]),e("div",ut,[e("div",pt,[w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),onChange:v,class:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm sm:text-base bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent"},[t[8]||(t[8]=e("option",{value:""},"All Categories",-1)),(d(!0),u(M,null,V(I.value,s=>(d(),u("option",{key:s,value:s},g(B(s)),9,gt))),128)),t[9]||(t[9]=e("option",{value:"Other"},"Other",-1))],544),[[O,c.value]]),$(R,{name:"fade-down"},{default:S(()=>[c.value==="Other"?w((d(),u("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),onInput:v,type:"text",placeholder:"Filter by custom category...",class:"w-full mt-2 px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm sm:text-base bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent"},null,544)),[[F,x.value]]):j("",!0)]),_:1})]),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),onChange:v,class:"flex-1 px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm sm:text-base bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent"},[...t[10]||(t[10]=[e("option",{value:"name_asc"},"Sort: Name A → Z",-1),e("option",{value:"name_desc"},"Sort: Name Z → A",-1),e("option",{value:"price_low"},"Sort: Price Low → High",-1),e("option",{value:"price_high"},"Sort: Price High → Low",-1),e("option",{value:"stock_high"},"Sort: Stock High → Low",-1)])],544),[[O,m.value]])])]),$(Z,{message:L(l).error},null,8,["message"]),L(l).isLoading?(d(),_(W,{key:0})):h.value.length?(d(),_(dt,{key:1,products:h.value},null,8,["products"])):(d(),u("div",xt,[...t[11]||(t[11]=[e("p",{class:"text-gray-500 dark:text-gray-400 text-base sm:text-lg"},"No products found",-1)])])),i.value>1&&b.value.length?(d(),u("div",yt,[e("button",{onClick:t[4]||(t[4]=s=>n.value=Math.max(1,n.value-1)),disabled:n.value===1,class:"px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,mt),e("div",bt,[(d(!0),u(M,null,V(i.value,s=>(d(),u("button",{key:s,onClick:k=>n.value=s,class:U(["px-2.5 sm:px-3 py-1.5 sm:py-2 text-sm sm:text-base rounded-lg transition",n.value===s?"bg-primary text-white font-semibold":"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"])},g(s),11,ht))),128))]),e("button",{onClick:t[5]||(t[5]=s=>n.value=Math.min(i.value,n.value+1)),disabled:n.value===i.value,class:"px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,vt)])):j("",!0)])]),_:1})}}},$t=D(kt,[["__scopeId","data-v-08b2c310"]]);export{$t as default};
