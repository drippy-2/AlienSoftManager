import{u as w,m as c,c as _,o as P,B as C,b as g,w as B,d as D,e as l,f as t,g as S,i as m,h as n,k as p,t as o,x as y,s as V}from"./index-CSEyxdT9.js";import{_ as $}from"./AppLayout-B6hHIpEb.js";import{L as E}from"./Loader-l99-MrMN.js";import{_ as N}from"./ErrorMessage-gaV-nPEj.js";import"./Footer-CwoNZgPF.js";const L={class:"max-w-4xl mx-auto"},M={class:"mb-6 sm:mb-8 flex flex-wrap gap-3"},R={key:1,class:"bg-white dark:bg-gray-900 rounded-lg shadow-lg overflow-hidden"},j={class:"flex flex-col md:flex-row"},A={class:"md:w-1/3 p-6 sm:p-8 bg-gray-50 dark:bg-gray-800 flex items-center justify-center"},I=["src","alt"],K={class:"md:w-2/3 p-6 sm:p-8"},W={class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-4"},z={class:"space-y-3 sm:space-y-4"},F={class:"ml-2 px-2 sm:px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-200 rounded-full text-xs sm:text-sm"},T={class:"ml-2 text-xl sm:text-2xl font-bold text-primary"},U={key:0},q={class:"ml-2 font-semibold text-sm sm:text-base text-gray-900 dark:text-gray-300"},G={key:1},H={class:"ml-2 text-green-600 dark:text-green-400 font-semibold text-sm sm:text-base"},J={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},O={class:"text-gray-700 dark:text-gray-400 leading-relaxed text-sm sm:text-base"},Q={class:"mt-6 sm:mt-8 flex flex-col sm:flex-row gap-3 sm:gap-4"},X=["disabled"],Y={key:2,class:"text-center py-8 sm:py-12 bg-white dark:bg-gray-900 rounded-lg shadow"},dt={__name:"ViewProduct",setup(Z){const b=C(),i=D(),a=w(),s=c(null),u=c(!1),v=_(()=>s.value?s.value.stock>50?"text-green-600":s.value.stock>0?"text-orange-600":"text-red-600":""),f=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",k=r=>{if(!r)return"KES 0.00";const e=(r*a.currentRate).toFixed(2),[d,x]=e.split(".");return"KES "+d.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+x},h=async()=>{if(!confirm("Are you sure you want to delete this product?"))return;u.value=!0,(await a.deleteProduct(s.value.id)).success&&i.push("/products"),u.value=!1};return P(async()=>{const r=b.params.id,e=Number(r),d=a.products.find(x=>x.id===e);if(d){s.value=d,a.currentProduct=d;return}if(a.currentProduct&&a.currentProduct.id===e){s.value=a.currentProduct;return}s.value=await a.fetchProductById(r)}),(r,e)=>(l(),g($,null,{default:B(()=>[t("div",L,[t("div",M,[t("button",{onClick:e[0]||(e[0]=d=>n(i).push("/products")),class:"inline-flex items-center gap-2 px-4 sm:px-5 py-2 sm:py-2.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-all font-medium text-sm sm:text-base border border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 shadow-sm hover:shadow"},[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),p(" Back to Products ",-1)])]),t("button",{onClick:e[1]||(e[1]=d=>n(i).push("/home")),class:"inline-flex items-center gap-2 px-4 sm:px-5 py-2 sm:py-2.5 bg-primary text-white rounded-lg hover:opacity-90 transition-all font-medium text-sm sm:text-base shadow-sm hover:shadow-md"},[...e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-3m0 0l7-4 7 4M5 9v10a1 1 0 001 1h12a1 1 0 001-1V9m-9 4v4m0 0v4m0-4h4m-4 0h-4"})],-1),p(" Dashboard ",-1)])])]),S(N,{message:n(a).error},null,8,["message"]),n(a).isLoading?(l(),g(E,{key:0})):s.value?(l(),m("div",R,[t("div",j,[t("div",A,[t("img",{src:s.value.thumbnail,alt:s.value.title,class:"w-full max-w-xs rounded-lg shadow"},null,8,I)]),t("div",K,[t("h1",W,o(s.value.title),1),t("div",z,[t("div",null,[e[5]||(e[5]=t("span",{class:"text-gray-600 dark:text-gray-400 text-sm sm:text-base"},"Category:",-1)),t("span",F,o(f(s.value.category)),1)]),t("div",null,[e[6]||(e[6]=t("span",{class:"text-gray-600 dark:text-gray-400 text-sm sm:text-base"},"Price:",-1)),t("span",T,o(k(s.value.price)),1)]),t("div",null,[e[7]||(e[7]=t("span",{class:"text-gray-600 dark:text-gray-400 text-sm sm:text-base"},"Stock:",-1)),t("span",{class:V(["ml-2 font-semibold text-sm sm:text-base",v.value])},o(s.value.stock)+" "+o(s.value.unit||"units"),3)]),s.value.rating?(l(),m("div",U,[e[8]||(e[8]=t("span",{class:"text-gray-600 dark:text-gray-400 text-sm sm:text-base"},"Rating:",-1)),t("span",q,o(s.value.rating)+" / 5",1)])):y("",!0),s.value.discountPercentage?(l(),m("div",G,[e[9]||(e[9]=t("span",{class:"text-gray-600 dark:text-gray-400 text-sm sm:text-base"},"Discount:",-1)),t("span",H,o(s.value.discountPercentage)+"% off",1)])):y("",!0),t("div",J,[e[10]||(e[10]=t("h2",{class:"text-base sm:text-lg font-semibold mb-2 text-gray-900 dark:text-white"},"Description",-1)),t("p",O,o(s.value.description),1)])]),t("div",Q,[t("button",{onClick:e[2]||(e[2]=d=>n(i).push(`/products/${s.value.id}/edit`)),class:"bg-primary text-white px-4 sm:px-6 py-2 rounded-lg hover:opacity-80 transition text-sm sm:text-base"}," Edit Product "),t("button",{onClick:h,disabled:u.value,class:"bg-red-600 dark:bg-red-700 text-white px-4 sm:px-6 py-2 rounded-lg hover:bg-red-700 dark:hover:bg-red-600 transition disabled:opacity-50 text-sm sm:text-base"},o(u.value?"Deleting...":"Delete Product"),9,X)])])])])):(l(),m("div",Y,[...e[11]||(e[11]=[t("p",{class:"text-gray-500 dark:text-gray-400 text-base sm:text-lg"},"Product not found",-1)])]))])]),_:1}))}};export{dt as default};
